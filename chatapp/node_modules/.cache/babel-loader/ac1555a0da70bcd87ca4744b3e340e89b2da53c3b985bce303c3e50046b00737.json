{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./chat.css';import{user}from'../Join/join.js';import socketio from'socket.io-client';import sendlogo from'../../images/send.png';import Message from'../Messages/message.js';import ReactScrollToBottom from\"react-scroll-to-bottom\";import closeIcon from'../../images/closeIcon.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";let socket;// const ENDPOINT = \"https://demo-cchat.herokuapp.com/\";\nconst ENDPOINT=\"http://localhost:4500/\";const Chat=()=>{const[id,setid]=useState(\"\");const[messages,setMessages]=useState([]);const send=()=>{var _socket;const message=document.getElementById('chatinput').value;(_socket=socket)===null||_socket===void 0?void 0:_socket.emit('message',{message,id});document.getElementById('chatinput').value=\"\";};console.log(messages);useEffect(()=>{socket=socketio(ENDPOINT,{transports:['websocket']});socket.on('connect',()=>{alert('connected');setid(socket.id);});console.log(socket);socket.emit('joined',{user});socket.on('welcome',data=>{setMessages([...messages,data]);console.log(data.user,data.message);});socket.on('user joined',data=>{setMessages([...messages,data]);console.log(data.user,data.message);});socket.on('leave',data=>{setMessages([...messages,data]);console.log(data.user,data.message);});return()=>{socket.disconnect();};},[]);useEffect(()=>{var _socket2;(_socket2=socket)===null||_socket2===void 0?void 0:_socket2.on('sendMessage',data=>{setMessages([...messages,data]);console.log(data.user,data.message,data.id);});return()=>{var _socket3;(_socket3=socket)===null||_socket3===void 0?void 0:_socket3.off();};},[messages]);return/*#__PURE__*/_jsx(\"div\",{className:\"chatpage\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chatcontainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"SAY HELLO\"}),/*#__PURE__*/_jsxs(\"a\",{href:\"/\",children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:closeIcon,alt:\"Close\"})]})]}),/*#__PURE__*/_jsx(ReactScrollToBottom,{className:\"chatbox\",children:messages.map((item,i)=>/*#__PURE__*/_jsx(Message,{user:item.id===id?'':item.user,message:item.message,classs:item.id===id?'right':'left'}))}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputbox\",children:[/*#__PURE__*/_jsx(\"input\",{onKeyDown:event=>event.key==='Enter'?send():null,type:\"text\",id:\"chatinput\"}),/*#__PURE__*/_jsx(\"button\",{onClick:send,className:\"sendbtn\",children:/*#__PURE__*/_jsx(\"img\",{src:sendlogo,alt:\"Send\"})})]})]})});};export default Chat;","map":{"version":3,"names":["React","useEffect","useState","user","socketio","sendlogo","Message","ReactScrollToBottom","closeIcon","jsx","_jsx","jsxs","_jsxs","socket","ENDPOINT","Chat","id","setid","messages","setMessages","send","_socket","message","document","getElementById","value","emit","console","log","transports","on","alert","data","disconnect","_socket2","_socket3","off","className","children","href","src","alt","map","item","i","classs","onKeyDown","event","key","type","onClick"],"sources":["D:/Chat-App/chatapp/src/component/Chat/chat.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport './chat.css'\r\nimport {user} from '../Join/join.js';\r\nimport socketio from 'socket.io-client';\r\nimport sendlogo from '../../images/send.png'\r\nimport Message from '../Messages/message.js';\r\nimport ReactScrollToBottom from \"react-scroll-to-bottom\";\r\nimport closeIcon from '../../images/closeIcon.png';\r\n\r\nlet socket;\r\n\r\n// const ENDPOINT = \"https://demo-cchat.herokuapp.com/\";\r\n\r\nconst ENDPOINT = \"http://localhost:4500/\";\r\n\r\nconst Chat = () => {\r\n\r\n  const [id, setid] = useState(\"\");\r\n  const [messages, setMessages] = useState([])\r\n\r\n  const send = () => {\r\n    const message = document.getElementById('chatinput').value;\r\n    socket?.emit('message', {message,id});\r\n    document.getElementById('chatinput').value=\"\";\r\n  }\r\n  console.log(messages);\r\n  useEffect(() => {\r\n    socket = socketio(ENDPOINT, {transports: ['websocket']});\r\n\r\n    socket.on('connect', () => {\r\n      alert('connected');\r\n      setid(socket.id);\r\n    })\r\n    console.log(socket);\r\n\r\n    socket.emit('joined', {user})\r\n\r\n    socket.on('welcome', (data)=>{\r\n      setMessages([...messages, data]);\r\n      console.log(data.user,data.message);\r\n    })\r\n\r\n    socket.on('user joined', (data)=>{\r\n      setMessages([...messages, data]);\r\n      console.log(data.user,data.message);\r\n    })\r\n\r\n    socket.on('leave', (data)=>{\r\n      setMessages([...messages, data]);\r\n      console.log(data.user,data.message);\r\n    })\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    }\r\n\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n      socket?.on('sendMessage', (data) => {\r\n        setMessages([...messages, data]);\r\n        console.log(data.user, data.message, data.id);\r\n      });\r\n      return () => {\r\n        socket?.off();\r\n      };\r\n    }, [messages]);\r\n  \r\n\r\n  return (\r\n    <div className='chatpage'>\r\n\r\n                <div className='chatcontainer'>\r\n                  <div className=\"header\">\r\n                  <h1>SAY HELLO</h1>\r\n                  <a href=\"/\"> <img src={closeIcon} alt=\"Close\" /></a>\r\n                  </div>\r\n                  \r\n                  <ReactScrollToBottom className=\"chatbox\">\r\n                            {messages.map((item, i) => <Message user={item.id === id ? '' : item.user} message={item.message} classs={item.id === id ? 'right' : 'left'} />)}\r\n                  </ReactScrollToBottom>\r\n                  \r\n                  <div className=\"inputbox\">\r\n                    <input onKeyDown={(event) => event.key === 'Enter' ? send() : null} type=\"text\" id='chatinput' />\r\n                    <button onClick={send} className=\"sendbtn\"><img src={sendlogo} alt=\"Send\" /></button>\r\n                  </div>\r\n                </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Chat"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}